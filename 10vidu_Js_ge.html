<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 B√†i T·∫≠p Th·ª±c H√†nh HTML & JavaScript</title>
    <!-- T·∫£i Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Thi·∫øt l·∫≠p font Inter m·∫∑c ƒë·ªãnh */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc;
        }
        /* Custom scrollbar cho khu v·ª±c code */
        .code-display {
            overflow-y: auto;
            max-height: 400px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col lg:flex-row">

    <!-- Sidebar Menu (Menu 10 B√†i t·∫≠p) -->
    <aside class="w-full lg:w-64 bg-gray-800 p-4 shadow-xl lg:flex-shrink-0">
        <h1 class="text-xl font-bold text-white mb-6 border-b border-gray-700 pb-3">10 B√†i Th·ª±c H√†nh JS</h1>
        <div id="menuContainer" class="space-y-3">
            <!-- N√∫t menu s·∫Ω ƒë∆∞·ª£c ch√®n b·ªüi JS -->
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-grow p-6 bg-white overflow-hidden">
        <h2 class="text-3xl font-extrabold text-gray-900 mb-6" id="exerciseTitle"></h2>

        <!-- Khu v·ª±c K·∫øt qu·∫£ (B√†i t·∫≠p ƒëang ch·∫°y) -->
        <div class="mb-8 p-6 border-4 border-dashed border-blue-200 bg-blue-50 rounded-lg shadow-inner">
            <h4 class="text-lg font-semibold text-blue-800 mb-4">‚ñ∂Ô∏è K·∫øt Qu·∫£ Tr√¨nh Di·ªÖn</h4>
            <div id="exerciseContent" class="min-h-[200px] flex flex-col justify-start">
                <p class="text-gray-500">Ch·ªçn m·ªôt b√†i t·∫≠p t·ª´ menu b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
            </div>
        </div>

        <!-- N√∫t Hi·ªÉn th·ªã Code -->
        <button id="toggleCodeBtn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 mb-6" onclick="toggleCodeDisplay()">
            Hi·ªÉn Th·ªã Source Code
        </button>

        <!-- Khu v·ª±c hi·ªÉn th·ªã Source Code -->
        <div id="codeArea" class="hidden bg-gray-900 text-gray-50 p-4 rounded-lg shadow-lg">
            <h4 class="text-lg font-semibold text-teal-400 mb-2">üìÑ Source Code (HTML & JavaScript)</h4>
            <pre class="code-display text-sm" id="sourceCodeDisplay"></pre>
        </div>
    </main>

    <script>
        // --- DATA C·ª¶A 10 B√ÄI T·∫¨P ---
        // L∆∞u tr·ªØ HTML (N·ªôi dung c·∫ßn ch√®n v√†o body) v√† JS (M√£ c·∫ßn th·ª±c thi)
        const exercises = {
            'B1': {
                title: '1. Thay ƒë·ªïi M√†u N·ªÅn',
                html: `
                    <button id="colorButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300">ƒê·ªïi M√†u N·ªÅn</button>
                `,
                js: `
                    // H√†m t·∫°o m√†u hex ng·∫´u nhi√™n
                    function getRandomColor() {
                        const letters = '0123456789ABCDEF';
                        let color = '#';
                        for (let i = 0; i < 6; i++) {
                            color += letters[Math.floor(Math.random() * 16)];
                        }
                        return color;
                    }

                    const button = document.getElementById('colorButton');
                    document.body.style.transition = 'background-color 0.5s';

                    button.addEventListener('click', function() {
                        const newColor = getRandomColor();
                        // Thay ƒë·ªïi m√†u n·ªÅn c·ªßa body (l∆∞u √Ω: body ·ªü ƒë√¢y l√† body c·ªßa trang ch√≠nh)
                        document.body.style.backgroundColor = newColor;
                        
                        // ƒê·ªïi m√†u n√∫t (t√πy ch·ªçn)
                        button.style.backgroundColor = newColor;
                        button.style.color = '#FFFFFF';
                    });
                    
                    // Reset m√†u n·ªÅn khi chuy·ªÉn b√†i
                    window.addEventListener('unload', () => {
                        document.body.style.backgroundColor = '#f7fafc';
                        document.body.style.transition = 'none';
                    });
                `
            },
            'B2': {
                title: '2. M√°y T√≠nh ƒê∆°n Gi·∫£n (+)',
                html: `
                    <div class="p-4 bg-gray-100 rounded-lg shadow-md max-w-xs">
                        <input type="number" id="num1" placeholder="S·ªë th·ª© nh·∫•t" class="w-full p-2 mb-2 border rounded">
                        <input type="number" id="num2" placeholder="S·ªë th·ª© hai" class="w-full p-2 mb-4 border rounded">
                        <button id="calculateBtn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 rounded transition">T√≠nh T·ªïng</button>
                        <p id="result" class="mt-4 text-center font-bold text-xl text-green-700">K·∫øt qu·∫£: 0</p>
                    </div>
                `,
                js: `
                    const num1Input = document.getElementById('num1');
                    const num2Input = document.getElementById('num2');
                    const calculateBtn = document.getElementById('calculateBtn');
                    const resultDisplay = document.getElementById('result');

                    function calculateSum() {
                        const num1 = parseFloat(num1Input.value) || 0;
                        const num2 = parseFloat(num2Input.value) || 0;
                        const sum = num1 + num2;
                        // ƒê√£ s·ª≠a: Thay ƒë·ªïi template literal th√†nh n·ªëi chu·ªói
                        resultDisplay.textContent = 'K·∫øt qu·∫£: ' + sum;
                    }

                    calculateBtn.addEventListener('click', calculateSum);
                `
            },
            'B3': {
                title: '3. Qu·∫£n l√Ω Danh s√°ch (To-Do)',
                html: `
                    <div class="max-w-md">
                        <div class="flex mb-4">
                            <input type="text" id="taskInput" placeholder="Nh·∫≠p c√¥ng vi·ªác m·ªõi..." class="flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <button id="addTaskBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-r-lg transition">Th√™m</button>
                        </div>
                        <ul id="todo-list" class="bg-white border border-gray-200 rounded-lg divide-y divide-gray-200 shadow-md">
                            <!-- Tasks here -->
                        </ul>
                    </div>
                `,
                js: `
                    const taskInput = document.getElementById('taskInput');
                    const addTaskBtn = document.getElementById('addTaskBtn');
                    const todoList = document.getElementById('todo-list');

                    function addTask() {
                        const taskText = taskInput.value.trim();

                        if (taskText === "") {
                            // C·∫£nh b√°o s·ª≠ d·ª•ng console.error ho·∫∑c giao di·ªán t√πy ch·ªânh thay v√¨ alert()
                            console.error("Vui l√≤ng nh·∫≠p c√¥ng vi·ªác!");
                            return;
                        }

                        const listItem = document.createElement('li');
                        listItem.className = 'p-3 flex justify-between items-center group hover:bg-red-50 transition duration-150';
                        // ƒê√£ s·ª≠a: Thay ƒë·ªïi template literal th√†nh n·ªëi chu·ªói
                        listItem.innerHTML = '<span>' + taskText + '</span>' +
                            '<button class="text-red-500 hover:text-red-700 text-sm opacity-0 group-hover:opacity-100 transition duration-150" onclick="this.parentNode.remove()">X√≥a</button>';
                        
                        todoList.appendChild(listItem);
                        taskInput.value = '';
                    }

                    addTaskBtn.addEventListener('click', addTask);
                    taskInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            addTask();
                        }
                    });
                `
            },
            'B4': {
                title: '4. Tr√¨nh chi·∫øu ·∫¢nh ƒê∆°n Gi·∫£n',
                html: `
                    <div class="slider-container bg-white p-4 rounded-lg shadow-xl max-w-lg mx-auto">
                        <img id="imageDisplay" src="https://picsum.photos/id/1018/400/250" alt="·∫¢nh tr√¨nh chi·∫øu" class="w-full h-auto object-cover rounded-md mb-4 shadow-inner">
                        <div class="controls flex justify-between">
                            <button id="prevBtn" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition duration-300">‚Üê Tr∆∞·ªõc</button>
                            <button id="nextBtn" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition duration-300">Sau ‚Üí</button>
                        </div>
                    </div>
                `,
                js: `
                    const imageDisplay = document.getElementById('imageDisplay');
                    const prevBtn = document.getElementById('prevBtn');
                    const nextBtn = document.getElementById('nextBtn');

                    const images = [
                        "https://picsum.photos/id/1018/400/250",
                        "https://picsum.photos/id/10/400/250",
                        "https://picsum.photos/id/1084/400/250",
                        "https://picsum.photos/id/165/400/250"
                    ];
                    
                    let currentImageIndex = 0;

                    function updateImage() {
                        imageDisplay.src = images[currentImageIndex];
                    }

                    function showNextImage() {
                        currentImageIndex = (currentImageIndex + 1) % images.length;
                        updateImage();
                    }

                    function showPrevImage() {
                        currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                        updateImage();
                    }

                    nextBtn.addEventListener('click', showNextImage);
                    prevBtn.addEventListener('click', showPrevImage);

                    // Kh·ªüi t·∫°o
                    updateImage();
                `
            },
            'B5': {
                title: '5. Chuy·ªÉn ƒë·ªïi Nhi·ªát ƒë·ªô (C‚ÜíF)',
                html: `
                    <div class="p-6 bg-yellow-100 rounded-lg shadow-md max-w-xs">
                        <label for="celsiusInput" class="text-sm font-medium text-gray-700">Nhi·ªát ƒë·ªô Celsius (¬∞C):</label>
                        <input type="number" id="celsiusInput" placeholder="V√≠ d·ª•: 25" class="w-full p-2 mb-4 border rounded">
                        
                        <button id="convertBtn" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 rounded transition">Chuy·ªÉn ƒê·ªïi</button>
                        
                        <p id="resultFahrenheit" class="mt-4 text-center font-bold text-xl text-yellow-800">K·∫øt qu·∫£ Fahrenheit (¬∞F): 0.00</p>
                    </div>
                `,
                js: `
                    const celsiusInput = document.getElementById('celsiusInput');
                    const convertBtn = document.getElementById('convertBtn');
                    const resultDisplay = document.getElementById('resultFahrenheit');

                    function convertToFahrenheit() {
                        const celsius = parseFloat(celsiusInput.value);

                        if (isNaN(celsius)) {
                            resultDisplay.textContent = "K·∫øt qu·∫£ Fahrenheit (¬∞F): L·ªói nh·∫≠p li·ªáu";
                            return;
                        }

                        // C√¥ng th·ª©c: F = C * 1.8 + 32
                        const fahrenheit = (celsius * 1.8) + 32;
                        
                        // ƒê√£ s·ª≠a: Thay ƒë·ªïi template literal th√†nh n·ªëi chu·ªói
                        resultDisplay.textContent = 'K·∫øt qu·∫£ Fahrenheit (¬∞F): ' + fahrenheit.toFixed(2);
                    }

                    convertBtn.addEventListener('click', convertToFahrenheit);
                `
            },
            'A6': {
                title: '6. ƒê·ªìng h·ªì ƒê·∫øm ng∆∞·ª£c',
                html: `
                    <div id="countdown" class="flex justify-center gap-4">
                        <div class="time-unit p-4 bg-white rounded-xl shadow-lg"><span class="number text-5xl font-extrabold text-indigo-600" id="days">00</span><span class="label text-sm text-gray-500 block">Ng√†y</span></div>
                        <div class="time-unit p-4 bg-white rounded-xl shadow-lg"><span class="number text-5xl font-extrabold text-indigo-600" id="hours">00</span><span class="label text-sm text-gray-500 block">Gi·ªù</span></div>
                        <div class="time-unit p-4 bg-white rounded-xl shadow-lg"><span class="number text-5xl font-extrabold text-indigo-600" id="minutes">00</span><span class="label text-sm text-gray-500 block">Ph√∫t</span></div>
                        <div class="time-unit p-4 bg-white rounded-xl shadow-lg"><span class="number text-5xl font-extrabold text-indigo-600" id="seconds">00</span><span class="label text-sm text-gray-500 block">Gi√¢y</span></div>
                    </div>
                `,
                js: `
                    // Thi·∫øt l·∫≠p ng√†y m·ª•c ti√™u (V√≠ d·ª•: 1/1/2026, 00:00:00)
                    const targetDate = new Date("Jan 1, 2026 00:00:00").getTime();
                    let timerInterval;

                    const updateCountdown = () => {
                        const now = new Date().getTime();
                        const distance = targetDate - now;

                        const oneSecond = 1000;
                        const oneMinute = oneSecond * 60;
                        const oneHour = oneMinute * 60;
                        const oneDay = oneHour * 24;

                        const days = Math.floor(distance / oneDay);
                        const hours = Math.floor((distance % oneDay) / oneHour);
                        const minutes = Math.floor((distance % oneHour) / oneMinute);
                        const seconds = Math.floor((distance % oneMinute) / oneSecond);
                        
                        const formatTime = (time) => String(time).padStart(2, '0');

                        // C·∫≠p nh·∫≠t DOM
                        const daysEl = document.getElementById("days");
                        const hoursEl = document.getElementById("hours");
                        const minutesEl = document.getElementById("minutes");
                        const secondsEl = document.getElementById("seconds");

                        if (daysEl) daysEl.textContent = formatTime(days);
                        if (hoursEl) hoursEl.textContent = formatTime(hours);
                        if (minutesEl) minutesEl.textContent = formatTime(minutes);
                        if (secondsEl) secondsEl.textContent = formatTime(seconds);

                        if (distance < 0) {
                            clearInterval(timerInterval);
                            const countdownEl = document.getElementById("countdown");
                            if (countdownEl) countdownEl.innerHTML = "<p class='text-2xl font-bold text-green-500'>üéâ S·ª± ki·ªán ƒë√£ ƒë·∫øn!</p>";
                        }
                    };

                    updateCountdown(); 
                    timerInterval = setInterval(updateCountdown, 1000);
                    
                    // Quan tr·ªçng: D·ªçn d·∫πp interval khi chuy·ªÉn b√†i t·∫≠p kh√°c
                    window.cleanupFunctions.push(() => clearInterval(timerInterval));
                `
            },
            'A7': {
                title: '7. L∆∞u Tr·ªØ C·∫•u h√¨nh (Local Storage)',
                html: `
                    <div id="settings" class="p-4 bg-pink-100 rounded-lg shadow-md mb-4">
                        <label for="fontSize" class="block mb-2 text-sm font-medium text-gray-700">K√≠ch th∆∞·ªõc ch·ªØ:</label>
                        <select id="fontSize" class="p-2 border rounded-md mb-3 w-full">
                            <option value="16px">B√¨nh th∆∞·ªùng (16px)</option>
                            <option value="20px">L·ªõn (20px)</option>
                            <option value="24px">R·∫•t l·ªõn (24px)</option>
                        </select>

                        <label for="bgColor" class="block mb-2 text-sm font-medium text-gray-700">M√†u n·ªÅn:</label>
                        <select id="bgColor" class="p-2 border rounded-md w-full">
                            <option value="#ffffff">Tr·∫Øng</option>
                            <option value="#f0f2f5">X√°m nh·∫°t</option>
                            <option value="#e0f7fa">Xanh nh·∫°t</option>
                        </select>
                    </div>

                    <p id="content" class="p-4 rounded-md transition duration-500">ƒê√¢y l√† ƒëo·∫°n n·ªôi dung. H√£y th·ª≠ thay ƒë·ªïi k√≠ch th∆∞·ªõc ch·ªØ v√† m√†u n·ªÅn, sau ƒë√≥ t·∫£i l·∫°i trang (F5) ƒë·ªÉ ki·ªÉm tra xem c·∫•u h√¨nh c√≥ ƒë∆∞·ª£c l∆∞u l·∫°i kh√¥ng.</p>
                `,
                js: `
                    const fontSizeSelect = document.getElementById('fontSize');
                    const bgColorSelect = document.getElementById('bgColor');
                    const contentElement = document.getElementById('content');
                    const bodyElement = document.body;

                    // Ch·ªâ √°p d·ª•ng thay ƒë·ªïi m√†u v√† font size cho khu v·ª±c n·ªôi dung (exerciseContent)
                    const targetElement = document.getElementById('exerciseContent');

                    const STORAGE_KEY_FONT = 'appFontSize_Demo';
                    const STORAGE_KEY_COLOR = 'appBgColor_Demo';

                    function applySettings(fontSize, bgColor) {
                        targetElement.style.fontSize = fontSize;
                        targetElement.style.backgroundColor = bgColor;
                        if(fontSizeSelect) fontSizeSelect.value = fontSize;
                        if(bgColorSelect) bgColorSelect.value = bgColor;
                    }

                    function loadSettings() {
                        const storedFontSize = localStorage.getItem(STORAGE_KEY_FONT);
                        const storedBgColor = localStorage.getItem(STORAGE_KEY_COLOR);

                        const defaultFontSize = '16px';
                        const defaultBgColor = 'transparent'; // Gi·ªØ trong su·ªët ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng container

                        applySettings(
                            storedFontSize || defaultFontSize,
                            storedBgColor || defaultBgColor
                        );
                    }

                    function saveSettings() {
                        const currentFontSize = fontSizeSelect.value;
                        const currentBgColor = bgColorSelect.value;

                        localStorage.setItem(STORAGE_KEY_FONT, currentFontSize);
                        localStorage.setItem(STORAGE_KEY_COLOR, currentBgColor);
                        
                        applySettings(currentFontSize, currentBgColor);
                    }

                    // T·∫£i c·∫•u h√¨nh khi b√†i t·∫≠p ƒë∆∞·ª£c load
                    loadSettings();

                    // L·∫Øng nghe s·ª± ki·ªán thay ƒë·ªïi
                    fontSizeSelect.addEventListener('change', saveSettings);
                    bgColorSelect.addEventListener('change', saveSettings);

                    // D·ªçn d·∫πp ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng b√†i t·∫≠p kh√°c
                    window.cleanupFunctions.push(() => {
                        localStorage.removeItem(STORAGE_KEY_FONT);
                        localStorage.removeItem(STORAGE_KEY_COLOR);
                        targetElement.style.fontSize = '16px';
                        targetElement.style.backgroundColor = 'transparent';
                    });
                `
            },
            'A8': {
                title: '8. L·ªçc D·ªØ li·ªáu ƒê·ªông',
                html: `
                    <div class="mb-4 flex flex-col md:flex-row gap-4">
                        <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m theo t√™n..." class="p-2 border rounded-lg flex-grow">
                        <button id="sortBtn" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition">S·∫Øp x·∫øp theo Gi√° (TƒÉng d·∫ßn)</button>
                    </div>
                    <ul id="product-list" class="bg-white border rounded-lg divide-y divide-gray-200 shadow-lg max-w-lg">
                        <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c render v√†o ƒë√¢y -->
                    </ul>
                `,
                js: `
                    let products = [
                        { name: "Laptop Dell", price: 20000000 },
                        { name: "ƒêi·ªán tho·∫°i Samsung", price: 12000000 },
                        { name: "B√†n ph√≠m c∆°", price: 2500000 },
                        { name: "Chu·ªôt Gaming", price: 800000 },
                        { name: "M√†n h√¨nh 27 inch", price: 7500000 },
                        { name: "Tai nghe Bluetooth", price: 1500000 },
                        { name: "·ªî c·ª©ng SSD 1TB", price: 3000000 }
                    ];

                    const productList = document.getElementById('product-list');
                    const searchInput = document.getElementById('searchInput');
                    const sortBtn = document.getElementById('sortBtn');
                    let isAscending = true;

                    const formatCurrency = (amount) => {
                        return amount.toLocaleString('vi-VN') + ' VNƒê';
                    };

                    const renderList = (data) => {
                        productList.innerHTML = '';
                        
                        if (data.length === 0) {
                            productList.innerHTML = '<li class="p-4 text-center text-gray-500">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o.</li>';
                            return;
                        }

                        data.forEach(product => {
                            const li = document.createElement('li');
                            li.className = 'flex justify-between items-center p-3 hover:bg-gray-50 transition';
                            // ƒê√£ s·ª≠a: Thay ƒë·ªïi template literal th√†nh n·ªëi chu·ªói
                            li.innerHTML = '<span class="text-gray-800">' + product.name + '</span>' +
                                           '<span class="font-bold text-red-600">' + formatCurrency(product.price) + '</span>';
                            productList.appendChild(li);
                        });
                    };

                    const handleFilter = () => {
                        const query = searchInput.value.toLowerCase().trim();
                        let filteredProducts = products.filter(product => {
                            return product.name.toLowerCase().includes(query);
                        });
                        renderList(filteredProducts);
                    };

                    const handleSort = () => {
                        isAscending = !isAscending;

                        products.sort((a, b) => {
                            return isAscending ? a.price - b.price : b.price - a.price;
                        });

                        sortBtn.textContent = isAscending ? 
                            'S·∫Øp x·∫øp theo Gi√° (TƒÉng d·∫ßn)' : 
                            'S·∫Øp x·∫øp theo Gi√° (Gi·∫£m d·∫ßn)';
                        
                        handleFilter(); // L·ªçc l·∫°i danh s√°ch sau khi s·∫Øp x·∫øp
                    };

                    searchInput.addEventListener('input', handleFilter);
                    sortBtn.addEventListener('click', handleSort);

                    renderList(products);
                `
            },
            'A9': {
                title: '9. Hi·ªÉn th·ªã/·∫®n M·∫≠t kh·∫©u',
                html: `
                    <div class="input-group relative w-full max-w-sm">
                        <input type="password" id="passwordInput" placeholder="Nh·∫≠p m·∫≠t kh·∫©u..." class="w-full p-3 border border-gray-300 rounded-lg pr-10 focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                        <span id="togglePassword" class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-xl text-gray-500 hover:text-purple-600 transition">üëÅÔ∏è</span>
                    </div>
                `,
                js: `
                    const passwordInput = document.getElementById('passwordInput');
                    const togglePassword = document.getElementById('togglePassword');

                    togglePassword.addEventListener('click', function() {
                        const isPassword = passwordInput.getAttribute('type') === 'password';
                        const newType = isPassword ? 'text' : 'password';
                        
                        passwordInput.setAttribute('type', newType);
                        
                        // Chuy·ªÉn ƒë·ªïi bi·ªÉu t∆∞·ª£ng
                        togglePassword.textContent = isPassword ? 'üôà' : 'üëÅÔ∏è';
                    });
                `
            },
            'A10': {
                title: '10. T√≠nh Ti·ªÅn Tip (Tip Calculator)',
                html: `
                    <div class="p-6 bg-lime-100 rounded-lg shadow-xl max-w-sm mx-auto">
                        <label for="billAmount" class="block mb-1 font-medium text-gray-700">T·ªïng h√≥a ƒë∆°n (VNƒê):</label>
                        <input type="number" id="billAmount" placeholder="V√≠ d·ª•: 500000" min="0" class="w-full p-2 border rounded-md mb-4 focus:ring-lime-500">

                        <label for="tipPercent" class="block mb-1 font-medium text-gray-700">Ph·∫ßn trƒÉm Tip:</label>
                        <select id="tipPercent" class="w-full p-2 border rounded-md mb-4 focus:ring-lime-500">
                            <option value="10">10% (T·ªët)</option>
                            <option value="15">15% (R·∫•t t·ªët)</option>
                            <option value="20">20% (Tuy·ªát v·ªùi)</option>
                            <option value="5">5% (T·∫°m ƒë∆∞·ª£c)</option>
                        </select>
                        
                        <label for="peopleCount" class="block mb-1 font-medium text-gray-700">S·ªë ng∆∞·ªùi chia h√≥a ƒë∆°n:</label>
                        <input type="number" id="peopleCount" value="1" min="1" class="w-full p-2 border rounded-md mb-6 focus:ring-lime-500">

                        <div id="results-area" class="mt-4 border-t pt-4 border-lime-300">
                            <div id="tipAmountResult" class="text-md mb-2">S·ªë ti·ªÅn Tip: <span class="font-bold text-lime-700">0 VNƒê</span></div>
                            <div id="totalBillResult" class="text-md mb-2">T·ªïng ti·ªÅn ph·∫£i tr·∫£: <span class="font-bold text-lime-700">0 VNƒê</span></div>
                            <div id="splitAmountResult" class="text-lg font-bold">M·ªói ng∆∞·ªùi ph·∫£i tr·∫£: <span class="font-extrabold text-lime-900">0 VNƒê</span></div>
                        </div>
                    </div>
                `,
                js: `
                    const billAmountInput = document.getElementById('billAmount');
                    const tipPercentSelect = document.getElementById('tipPercent');
                    const peopleCountInput = document.getElementById('peopleCount');

                    const tipAmountResult = document.getElementById('tipAmountResult');
                    const totalBillResult = document.getElementById('totalBillResult');
                    const splitAmountResult = document.getElementById('splitAmountResult');

                    const formatCurrency = (amount) => {
                        return Math.round(amount).toLocaleString('vi-VN') + ' VNƒê';
                    };

                    function calculateTip() {
                        const billAmount = parseFloat(billAmountInput.value) || 0;
                        const tipPercent = parseFloat(tipPercentSelect.value) || 0;
                        const peopleCount = parseInt(peopleCountInput.value) || 1;

                        if (billAmount < 0 || peopleCount < 1) {
                            // X·ª≠ l√Ω l·ªói trong UI thay v√¨ alert
                            tipAmountResult.innerHTML = 'S·ªë ti·ªÅn Tip: <span class="font-bold text-red-500">L·ªói nh·∫≠p li·ªáu</span>';
                            totalBillResult.innerHTML = 'T·ªïng ti·ªÅn ph·∫£i tr·∫£: <span class="font-bold text-red-500">L·ªói nh·∫≠p li·ªáu</span>';
                            splitAmountResult.innerHTML = 'M·ªói ng∆∞·ªùi ph·∫£i tr·∫£: <span class="font-bold text-red-500">L·ªói nh·∫≠p li·ªáu</span>';
                            return;
                        }

                        // T√≠nh to√°n
                        const tipAmount = (billAmount * tipPercent) / 100;
                        const totalBill = billAmount + tipAmount;
                        const splitAmount = totalBill / peopleCount;

                        // C·∫≠p nh·∫≠t DOM. ƒê√£ s·ª≠a: Thay ƒë·ªïi template literal th√†nh n·ªëi chu·ªói
                        tipAmountResult.innerHTML = 'S·ªë ti·ªÅn Tip: <span class="font-bold text-lime-700">' + formatCurrency(tipAmount) + '</span>';
                        totalBillResult.innerHTML = 'T·ªïng ti·ªÅn ph·∫£i tr·∫£: <span class="font-bold text-lime-700">' + formatCurrency(totalBill) + '</span>';
                        splitAmountResult.innerHTML = 'M·ªói ng∆∞·ªùi ph·∫£i tr·∫£ (' + peopleCount + ' ng∆∞·ªùi): <span class="font-extrabold text-lime-900">' + formatCurrency(splitAmount) + '</span>';
                    }

                    // L·∫Øng nghe s·ª± ki·ªán input/change ƒë·ªÉ t√≠nh to√°n t·ª± ƒë·ªông
                    billAmountInput.addEventListener('input', calculateTip);
                    tipPercentSelect.addEventListener('change', calculateTip);
                    peopleCountInput.addEventListener('input', calculateTip);

                    // Hi·ªÉn th·ªã k·∫øt qu·∫£ ban ƒë·∫ßu
                    calculateTip();
                `
            }
        };

        // Bi·∫øn to√†n c·ª•c ƒë·ªÉ l∆∞u ID b√†i t·∫≠p ƒëang ho·∫°t ƒë·ªông
        let activeExerciseId = null;
        // M·∫£ng ch·ª©a c√°c h√†m d·ªçn d·∫πp (cleanup) cho c√°c b√†i t·∫≠p ph·ª©c t·∫°p (nh∆∞ clearInterval)
        window.cleanupFunctions = [];
        
        // --- CH·ª®C NƒÇNG CH√çNH ---

        // 1. H√†m t·∫£i n·ªôi dung b√†i t·∫≠p
        function loadExercise(id) {
            // 1a. D·ªçn d·∫πp: Ch·∫°y c√°c h√†m d·ªçn d·∫πp t·ª´ b√†i t·∫≠p c≈© (v√≠ d·ª•: clearInterval)
            window.cleanupFunctions.forEach(fn => fn());
            window.cleanupFunctions = [];
            
            // 1b. L·∫•y d·ªØ li·ªáu b√†i t·∫≠p m·ªõi
            const exercise = exercises[id];
            if (!exercise) return;

            activeExerciseId = id;
            const contentArea = document.getElementById('exerciseContent');
            const titleElement = document.getElementById('exerciseTitle');
            const sourceCodeDisplay = document.getElementById('sourceCodeDisplay');

            // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ
            titleElement.textContent = exercise.title;

            // Ch√®n HTML v√†o khu v·ª±c hi·ªÉn th·ªã
            contentArea.innerHTML = exercise.html;
            
            // ·∫®n khu v·ª±c code v√† reset n√∫t
            document.getElementById('codeArea').classList.add('hidden');
            document.getElementById('toggleCodeBtn').textContent = 'Hi·ªÉn Th·ªã Source Code';

            // Hi·ªÉn th·ªã m√£ ngu·ªìn trong khu v·ª±c code
            const fullCode = `<!-- HTML -->\n${exercise.html}\n\n// JavaScript\n${exercise.js}`;
            sourceCodeDisplay.textContent = fullCode.trim();

            // Th·ª±c thi JavaScript: ƒê√¢y l√† b∆∞·ªõc quan tr·ªçng nh·∫•t
            // S·ª≠ d·ª•ng setTimeout ƒë·ªÉ ƒë·∫£m b·∫£o c√°c ph·∫ßn t·ª≠ DOM ƒë√£ ƒë∆∞·ª£c ch√®n v√† s·∫µn s√†ng
            setTimeout(() => {
                try {
                    // T·∫°o m·ªôt h√†m m·ªõi t·ª´ chu·ªói code JS v√† th·ª±c thi n√≥
                    new Function(exercise.js)();
                } catch (error) {
                    console.error("L·ªói khi th·ª±c thi JavaScript:", error);
                    contentArea.innerHTML += `<p class="text-red-500 mt-4">L·ªói: Kh√¥ng th·ªÉ th·ª±c thi JavaScript c·ªßa b√†i t·∫≠p n√†y. Ki·ªÉm tra console.</p>`;
                }
            }, 50); // ƒê·ªô tr·ªÖ nh·ªè ƒë·ªÉ DOM ·ªïn ƒë·ªãnh

            // C·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t menu
            updateActiveButton(id);
        }

        // 2. H√†m t·∫°o menu v√† g·∫Øn s·ª± ki·ªán
        function createMenu() {
            const menuContainer = document.getElementById('menuContainer');
            Object.keys(exercises).forEach(id => {
                const exercise = exercises[id];
                const button = document.createElement('button');
                button.id = `btn-${id}`;
                button.className = 'w-full text-left p-3 rounded-lg font-medium text-white transition duration-200 hover:bg-gray-700';
                button.textContent = exercise.title;
                button.onclick = () => loadExercise(id);
                menuContainer.appendChild(button);
            });
            
            // T·∫£i b√†i t·∫≠p ƒë·∫ßu ti√™n khi trang load
            if (Object.keys(exercises).length > 0) {
                loadExercise(Object.keys(exercises)[0]);
            }
        }

        // 3. C·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t b·∫•m ƒëang ho·∫°t ƒë·ªông
        function updateActiveButton(activeId) {
            Object.keys(exercises).forEach(id => {
                const button = document.getElementById(`btn-${id}`);
                if (button) {
                    if (id === activeId) {
                        button.classList.remove('bg-gray-700', 'hover:bg-gray-700');
                        button.classList.add('bg-blue-600', 'hover:bg-blue-700');
                    } else {
                        button.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                        button.classList.add('bg-gray-700', 'hover:bg-gray-700');
                    }
                }
            });
        }

        // 4. Ch·ª©c nƒÉng hi·ªÉn th·ªã/·∫©n m√£ ngu·ªìn
        function toggleCodeDisplay() {
            const codeArea = document.getElementById('codeArea');
            const toggleBtn = document.getElementById('toggleCodeBtn');
            const isHidden = codeArea.classList.contains('hidden');

            if (isHidden) {
                codeArea.classList.remove('hidden');
                toggleBtn.textContent = '·∫®n Source Code';
                toggleBtn.classList.remove('bg-purple-600');
                toggleBtn.classList.add('bg-red-500');
            } else {
                codeArea.classList.add('hidden');
                toggleBtn.textContent = 'Hi·ªÉn Th·ªã Source Code';
                toggleBtn.classList.remove('bg-red-500');
                toggleBtn.classList.add('bg-purple-600');
            }
        }

        // Ch·∫°y khi DOM ƒë√£ s·∫µn s√†ng
        document.addEventListener('DOMContentLoaded', createMenu);
    </script>
</body>
</html>